{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="main-menu">
    <div class="menu-header">
        <span class="menu-title">{{ page_title }}</span>
        <span class="menu-label">–í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º</span>
    </div>

    <div class="menu-row single">
        <a href="{% url 'start_passport_flow' %}?variant=new_client" class="menu-btn full" style="text-decoration:none;">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞</a>
    </div>

    {% if message %}
        <div class="menu-row single">
            <div class="menu-header-text">{{ message }}</div>
        </div>
    {% endif %}

    {% if show_upload_buttons %}
        <div class="menu-row single">
            <div class="menu-row-text">{{ upload_message }}</div>
        </div>
        
        {% if not rieltor_exists %}
            <div class="menu-row single">
                <a href="{% url 'upload_passport_page' passport_type='rieltor' %}" class="menu-btn full" style="text-decoration:none;">
                    üì∑ –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–∞—Å–ø–æ—Ä—Ç —Ä–∏–µ–ª—Ç–æ—Ä–∞
                </a>
            </div>
        
        {% elif client_exists == 1 %}
            <div class="menu-row single">
                <a href="{% url 'upload_passport_page' passport_type='client' %}" class="menu-btn full" style="text-decoration:none;">
                    üì∑ –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–∞—Å–ø–æ—Ä—Ç –∫–ª–∏–µ–Ω—Ç–∞
                </a>
            </div>
        {% endif %}
    {% endif %}

    {% if rieltor_exists and client_exists != 1 %}
        <div class="menu-row single">
            <a href="#" class="menu-btn full js-doc-type" data-doc="1" style="text-decoration:none;">–ê–≤–∞–Ω—Å–æ–≤–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</a>
        </div>

        <div class="menu-row single">
            <a href="#" class="menu-btn full js-doc-type" data-doc="2" style="text-decoration:none;">–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã</a>
        </div>

        <div class="menu-row single">
            <a href="#" class="menu-btn full js-doc-type" data-doc="3" style="text-decoration:none;">–ò–ø–æ—Ç–µ–∫–∞</a>
        </div>

        <div class="menu-row single">
            <a href="#" class="menu-btn full js-doc-type" data-doc="4" style="text-decoration:none;">–û–±–º–µ–Ω</a>
        </div>

        <div class="menu-row single">
            <a href="#" class="menu-btn full js-doc-type" data-doc="6" style="text-decoration:none;">–ü–æ–¥–±–æ—Ä</a>
        </div>

        <div class="menu-row single">
            <a href="#" class="menu-btn full js-doc-type" data-doc="7" style="text-decoration:none;">–ü—Ä–æ–¥–∞–∂–∞</a>
        </div>

        <div class="menu-row single">
            <a href="#" class="menu-btn full js-doc-type" data-doc="8" style="text-decoration:none;">–†–∞—Å—Ç–æ—Ä–∂–µ–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞ —É—Å–ª—É–≥</a>
        </div>

        <div class="menu-row single">
            <a href="#" class="menu-btn full js-doc-type" data-doc="9" style="text-decoration:none;">–Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ</a>
        </div>

        <div class="menu-row single">
            <a href="#" class="menu-btn full js-doc-type" data-doc="10" style="text-decoration:none;">–°–æ–≥–ª–∞—à–µ–Ω–∏–µ –æ —Ä–∞—Å—Ç–æ—Ä–∂–µ–Ω–∏–∏ –∞–≤–∞–Ω—Å–∞</a>
        </div>
    {% endif %}
    
    <div class="menu-row single">
        <a href="{% url 'main_menu' %}" class="menu-btn back full" style="text-decoration:none;">‚¨Ö –ù–∞–∑–∞–¥</a>
    </div>
</div>

<script>
let selectedVariant = null;
let selectedDocType = null;

function selectVariant(variant) {
    selectedVariant = variant; // 'continue' –∏–ª–∏ 'new_client'
    return false;
}

document.addEventListener('click', function(e) {
    const docBtn = e.target.closest('.js-doc-type');
    if (docBtn) {
        e.preventDefault();
        selectedDocType = docBtn.dataset.doc;
        if (!selectedVariant || selectedVariant === 'continue') {
            // –ó–∞–ø—É—Å–∫–∞–µ–º –≤–µ–±-–ø–æ—Ç–æ–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–∞–∫ –≤ –±–æ—Ç–µ
            const url = `{% url 'start_passport_flow' %}?variant=continue&doc_type=${selectedDocType}`;
            window.location.href = url;
        } else if (selectedVariant === 'new_client') {
            window.location.href = `{% url 'start_passport_flow' %}?variant=new_client`;
        }
    }
});
</script>
{% endblock %}